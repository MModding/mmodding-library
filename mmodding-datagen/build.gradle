import com.mmodding.gradle.api.EnvironmentTarget

mmodding {
	configureFabricModJson {
		environment = EnvironmentTarget.ANY
		addMixin("mmodding_datagen.mixins.json")
		withInjectedInterfaces {
			it.injectTo("net/minecraft/class_2248", Set.of(
				"com/mmodding/library/datagen/api/recipe/RecipeContainer",
				"com/mmodding/library/datagen/api/loot/block/BlockLootContainer"
			))
			it.injectTo("net/minecraft/class_1299", Set.of(
				"com/mmodding/library/datagen/api/loot/entity/EntityLootContainer"
			))
			it.injectTo("net/minecraft/class_1792", Set.of(
				"com/mmodding/library/datagen/api/recipe/RecipeContainer"
			))
		}
	}
	modules {
		implementation("mmodding-core")
		implementation("mmodding-java")
	}
	configureTestmod {
		withEntrypoints {
			it.init("com.mmodding.library.datagen.test.DatagenTests")
			it.custom("fabric-datagen", "com.mmodding.library.datagen.test.DatagenTests")
		}
	}
}
